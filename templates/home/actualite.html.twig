{% extends 'base.html.twig' %}
{% block title %}
	Actualités
{% endblock %}

{% block body %}
	<body class="bg-secondary">
	<div class=row>
		<div class="col-12 col-lg-6">
			<h1 class="text-center m-3 fontTitle text-light">Actualités</h1>
			<div class="container">
				<div class="row m-2 justify-content-start">
					<!-- loop on the actualities passed in parameters of the controller-->
					{% for actuality in actualities %}
						<div class="border-top d-flex flex-row m-3 pt-3 col-10 col-sm-5 col-md-5">
							{% if actuality.image %}
								<a data-bs-toggle="modal" data-bs-target="#eModal">
									<img id="imgActu" class="m-2 imgActu" src={{ asset('css/images/' ~ actuality.image) }}>
								</a>
								<div class="d-flex flex-column ms-3 w-75 text-light">
									<h6>
										{{actuality.title}}
									</h6>
									<p>
										{{actuality.content}}
									</p>
									<small>Publié le
										{{actuality.publishedAt|date('d/m/Y')}}
									</small>
								</div>
							</div>
						{% else %}
							<div class="d-flex flex-column ms-3 w-100 text-light">
								<h6>
									{{actuality.title}}
								</h6>
								<p>
									{{actuality.content}}
								</p>
								<small>
									Publié le
									{{actuality.publishedAt|date('d/m/Y')}}
								</small>
								{% if is_granted('ROLE_ADMIN') %}
									<a class="btn btn-warning m-1" href="#">
										<i class="bi bi-pencil-square me-2"></i>Modifier
									</a>
									<a class="btn btn-danger m-1" href="#">
										<i class="bi bi-trash3 me-2"></i>Supprimer
									</a>
								{% endif %}
							</div>
						</div>
					{% endif %}
				{% endfor %}
			</div>
		</div>
	</div>
		<div class="col-12 col-lg-6">
			<h1 class="text-center m-3 fontTitle text-light">Publications</h1>
			<div class="container">
			{% for publication in publications %}
					{% set images = publication.images %}
						<div class="row m-2 justify-content-start">
								<div class="d-flex flex-row justify-content-start border-top m-3 pt-3">
								{% for image in images %}
									<img class="m-2 imgActu" src= {{ asset('css/images/') ~ image }} alt="image de publication">
								{% endfor %}
								</div>
								<div class="d-flex flex-column ms-3 w-75 text-light">
									<h6>
										{{publication.title}}
									</h6>
									<p>
										{{publication.content}}
									</p>
									<small>Publié le
										{{publication.publishedAt|date('d/m/Y')}}
									</small>
								</div>
							</div>
			{% endfor %}
			</div>
			</div>
	</div>
</body>
{% endblock %}
